{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Link,Redirect}from'react-router-dom';import axios from'axios';import Form from'../form';import'../form.css';var SignIn=/*#__PURE__*/function(_React$Component){_inherits(SignIn,_React$Component);var _super=_createSuper(SignIn);function SignIn(props){var _this;_classCallCheck(this,SignIn);_this=_super.call(this,props);_this.state={email:'',password:'',token:'',redirect:localStorage.getItem('userTokenTime')?true:false};_this.onSubmitHandler=_this.onSubmitHandler.bind(_assertThisInitialized(_this));_this.emailInputChangeHandler=_this.emailInputChangeHandler.bind(_assertThisInitialized(_this));_this.passwordInputChangeHandler=_this.passwordInputChangeHandler.bind(_assertThisInitialized(_this));return _this;}_createClass(SignIn,[{key:\"onSubmitHandler\",value:function onSubmitHandler(){var _this2=this;if(!(this.state.email===''||this.state.password==='')&&/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(this.state.email)){axios.post('/api/v1/users/login',{email:this.state.email,password:this.state.password}).then(function(res){_this2.setState({token:res.data.token});var data={token:_this2.state.token,time:new Date().getTime()};localStorage.setItem('userTokenTime',JSON.stringify(data));_this2.setState({redirect:true});}).catch(function(err){console.log(err);});}else{alert('Please enter valid details');}}},{key:\"emailInputChangeHandler\",value:function emailInputChangeHandler(event){this.setState({email:event.target.value});}},{key:\"passwordInputChangeHandler\",value:function passwordInputChangeHandler(event){this.setState({password:event.target.value});}},{key:\"render\",value:function render(){if(this.state.redirect)return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});return/*#__PURE__*/React.createElement(Form,{onSubmit:this.onSubmitHandler.bind(this)},/*#__PURE__*/React.createElement(\"h3\",{className:\"text-center text-info\"},\"Login\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\",className:\"text-info\"},\"Email:\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{id:\"email\",className:\"form-control\",type:\"email\",name:\"email\",placeholder:\"example@domain.com\",onChange:this.emailInputChangeHandler,required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\",className:\"text-info\"},\"Password:\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{id:\"password\",className:\"form-control\",type:\"password\",name:\"password\",placeholder:\"********\",onChange:this.passwordInputChangeHandler,required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between align-items-end\"},/*#__PURE__*/React.createElement(\"button\",{onClick:this.onSubmitHandler,className:\"btn btn-info btn-md\",type:\"button\"},\"Submit\"),/*#__PURE__*/React.createElement(Link,{to:\"/signUp\",className:\"text-info\"},\"Sign Up here\")));}}]);return SignIn;}(React.Component);export default SignIn;","map":{"version":3,"sources":["C:/Users/mdjub/Documents/Video Player App/frontend/src/components/Form/SignIn/SignIn.js"],"names":["React","Link","Redirect","axios","Form","SignIn","props","state","email","password","token","redirect","localStorage","getItem","onSubmitHandler","bind","emailInputChangeHandler","passwordInputChangeHandler","test","post","then","res","setState","data","time","Date","getTime","setItem","JSON","stringify","catch","err","console","log","alert","event","target","value","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\n\nimport Form from '../form';\nimport '../form.css';\n\nclass SignIn extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: '',\n      password: '',\n      token: '',\n      redirect: localStorage.getItem('userTokenTime') ? true : false\n    }\n\n    this.onSubmitHandler = this.onSubmitHandler.bind(this);\n    this.emailInputChangeHandler = this.emailInputChangeHandler.bind(this);\n    this.passwordInputChangeHandler = this.passwordInputChangeHandler.bind(this);\n  }\n\n  onSubmitHandler() {\n    if (!(this.state.email === '' || this.state.password === '')\n      && (/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(this.state.email))) {\n      axios.post('/api/v1/users/login', {\n        email: this.state.email,\n        password: this.state.password\n      }).then(res => {\n        this.setState({\n          token: res.data.token\n        });\n        const data = {\n          token: this.state.token,\n          time: new Date().getTime()\n        }\n        localStorage.setItem('userTokenTime', JSON.stringify(data));\n        this.setState({\n          redirect: true\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      alert('Please enter valid details');\n    }\n  }\n\n  emailInputChangeHandler(event) {\n    this.setState({\n      email: event.target.value\n    });\n  }\n\n  passwordInputChangeHandler(event) {\n    this.setState({\n      password: event.target.value\n    });\n  }\n\n  render() {\n    if (this.state.redirect) return <Redirect to=\"/\" />;\n    return (\n      <Form onSubmit={this.onSubmitHandler.bind(this)}>\n        <h3 className=\"text-center text-info\">Login</h3>\n        <div className=\"form-group\">\n          <label htmlFor=\"email\" className=\"text-info\">Email:</label><br />\n          <input\n            id=\"email\"\n            className=\"form-control\"\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"example@domain.com\"\n            onChange={this.emailInputChangeHandler}\n            required />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"password\" className=\"text-info\">Password:</label><br />\n          <input\n            id=\"password\"\n            className=\"form-control\"\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"********\"\n            onChange={this.passwordInputChangeHandler}\n            required />\n        </div>\n        <div className=\"d-flex justify-content-between align-items-end\">\n          <button onClick={this.onSubmitHandler} className=\"btn btn-info btn-md\" type=\"button\">Submit</button>\n          <Link to=\"/signUp\" className=\"text-info\">Sign Up here</Link>\n        </div>\n      </Form>\n    );\n  }\n}\n\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}