{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Progress}from'reactstrap';import{ToastContainer,toast}from'react-toastify';import{Redirect}from'react-router-dom';import'react-toastify/dist/ReactToastify.css';import'./Upload.css';import Navbar from'../Navbar/Navbar';var Upload=/*#__PURE__*/function(_React$Component){_inherits(Upload,_React$Component);var _super=_createSuper(Upload);function Upload(){var _this;_classCallCheck(this,Upload);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={selectedVideos:null,loaded:0};return _this;}_createClass(Upload,[{key:\"maxSelectFile\",value:function maxSelectFile(event){var files=event.target.files;if(files.length>1){toast.error('Maximum 1 file is allowed');event.target.value=null;return false;}else{var err='';for(var i=0;i<files.length;i++){if(files[i].size>52428800){// 50 MB\nerr+=files[i].name+', ';}}if(err!==''){// error caught\nevent.target.value=null;toast.error(err+\" is/are too large. Please select file size < 50Mb\");}}return true;}},{key:\"fileChangeHandler\",value:function fileChangeHandler(event){var files=event.target.files;if(this.maxSelectFile(event)){this.setState({selectedVideos:files,loaded:0});}}},{key:\"fileUploadHandler\",value:function fileUploadHandler(event){var _this2=this;var data=new FormData();for(var i=0;i<this.state.selectedVideos.length;i++){data.append('file',this.state.selectedVideos[i]);}axios.post('http://127.0.0.1:3333/api/upload',data,{headers:{'Content-Type':'application/json','Authorization':'Bearer '+JSON.parse(localStorage.getItem('userTokenTime')).token}},{onUploadProgress:function onUploadProgress(ProgressEvent){_this2.setState({loaded:ProgressEvent.loaded/ProgressEvent.total*100});}}).then(function(res){toast.success('Upload Successful');}).catch(function(err){toast.error(\"Upload Fail with status: \".concat(err.statusText));});}},{key:\"render\",value:function render(){if(!localStorage.getItem('userTokenTime'))return/*#__PURE__*/React.createElement(Redirect,{to:\"/signIn\"});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Navbar,null),/*#__PURE__*/React.createElement(\"div\",{className:\"container mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(ToastContainer,null)),/*#__PURE__*/React.createElement(\"h4\",null,\"Upload Video\"),/*#__PURE__*/React.createElement(\"hr\",{className:\"my-4\"}),/*#__PURE__*/React.createElement(\"form\",{method:\"post\",name:\"videoUpload\",action:\"/api/upload\",id:\"#\",encType:\"multipart/form-data\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group files\"},/*#__PURE__*/React.createElement(\"label\",null,\"Upload Your Videos Here\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",name:\"file\",className:\"form-control\",multiple:\"multiple\",accept:\"video/*\",onChange:this.fileChangeHandler.bind(this)}),/*#__PURE__*/React.createElement(Progress,{max:\"100\",color:\"success\",value:this.state.loaded,className:\"mt-4 mb-1\"},isNaN(Math.round(this.state.loaded,2))?0:Math.round(this.state.loaded,2),\"%\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-success btn-block\",onClick:this.fileUploadHandler.bind(this)},\"Upload Video\")))));}}]);return Upload;}(React.Component);export default Upload;","map":{"version":3,"sources":["C:/Users/mdjub/Documents/Video Player App/frontend/src/components/Upload/Upload.js"],"names":["React","axios","Progress","ToastContainer","toast","Redirect","Navbar","Upload","state","selectedVideos","loaded","event","files","target","length","error","value","err","i","size","name","maxSelectFile","setState","data","FormData","append","post","headers","JSON","parse","localStorage","getItem","token","onUploadProgress","ProgressEvent","total","then","res","success","catch","statusText","fileChangeHandler","bind","isNaN","Math","round","fileUploadHandler","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { Progress } from 'reactstrap';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { Redirect } from 'react-router-dom';\n\nimport 'react-toastify/dist/ReactToastify.css';\nimport './Upload.css';\nimport Navbar from '../Navbar/Navbar';\n\nclass Upload extends React.Component {\n  state = {\n    selectedVideos: null,\n    loaded: 0\n  }\n\n  maxSelectFile(event) {\n    let files = event.target.files;\n    if (files.length > 1) {\n      toast.error('Maximum 1 file is allowed');\n      event.target.value = null;\n      return false;\n    } else {\n      let err = '';\n      for (let i = 0; i < files.length; i++) {\n        if (files[i].size > 52428800) { // 50 MB\n          err += files[i].name + ', ';\n        }\n      }\n      if (err !== '') {\n        // error caught\n        event.target.value = null;\n        toast.error(err + \" is/are too large. Please select file size < 50Mb\");\n      }\n    }\n    return true;\n  }\n\n  fileChangeHandler(event) {\n    const files = event.target.files;\n    if (this.maxSelectFile(event)) {\n      this.setState({\n        selectedVideos: files,\n        loaded: 0\n      });\n    }\n  }\n\n  fileUploadHandler(event) {\n    const data = new FormData();\n    for (let i = 0; i < this.state.selectedVideos.length; i++) {\n      data.append('file', this.state.selectedVideos[i]);\n    }\n    axios.post('http://127.0.0.1:3333/api/upload', data, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('userTokenTime')).token\n      }\n    }, {\n      onUploadProgress: ProgressEvent => {\n        this.setState({\n          loaded: (ProgressEvent.loaded / ProgressEvent.total * 100)\n        });\n      }\n    }).then(res => {\n      toast.success('Upload Successful');\n    }).catch(err => {\n      toast.error(`Upload Fail with status: ${err.statusText}`);\n    });\n  }\n\n  render() {\n    if (!localStorage.getItem('userTokenTime')) return <Redirect to=\"/signIn\" />\n    return (\n      <React.Fragment>\n        <Navbar />\n        <div className=\"container mt-5\">\n          <div className=\"form-group\">\n            <ToastContainer />\n          </div>\n          <h4>Upload Video</h4>\n          <hr className=\"my-4\" />\n\n          <form method=\"post\" name=\"videoUpload\" action=\"/api/upload\" id=\"#\" encType=\"multipart/form-data\">\n            <div className=\"form-group files\">\n              <label>Upload Your Videos Here</label>\n              <input\n                type=\"file\"\n                name=\"file\"\n                className=\"form-control\"\n                multiple=\"multiple\"\n                accept=\"video/*\"\n                onChange={this.fileChangeHandler.bind(this)} />\n              <Progress max=\"100\" color=\"success\" value={this.state.loaded} className=\"mt-4 mb-1\">\n                {isNaN(Math.round(this.state.loaded, 2)) ? 0 : Math.round(this.state.loaded, 2)}%\n              </Progress>\n              <button\n                type=\"button\"\n                className=\"btn btn-success btn-block\"\n                onClick={this.fileUploadHandler.bind(this)}>Upload Video\n              </button>\n            </div>\n          </form>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Upload;\n"]},"metadata":{},"sourceType":"module"}