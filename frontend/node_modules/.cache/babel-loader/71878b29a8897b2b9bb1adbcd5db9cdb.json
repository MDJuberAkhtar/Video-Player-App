{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Redirect}from'react-router-dom';import videojs from'video.js';import'./videojs.css';import Navbar from'../Navbar/Navbar';var VideoPlayer=/*#__PURE__*/function(_React$Component){_inherits(VideoPlayer,_React$Component);var _super=_createSuper(VideoPlayer);function VideoPlayer(props){var _this;_classCallCheck(this,VideoPlayer);_this=_super.call(this,props);_this.state={loaded:false,videoJsOptions:null};return _this;}_createClass(VideoPlayer,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('http://127.0.0.1:3333/api/videoList',{headers:{'Content-Type':'application/json','Authorization':'Bearer '+JSON.parse(localStorage.getItem('userTokenTime')).token}}).then(function(res){res.data.map(function(video){if(video.upload_title===_this2.props.match.params.videoTitle){_this2.setState({loaded:true,videoJsOptions:{autoplay:false,controls:true,sources:[{src:video.video_path}]}},function(){_this2.player=videojs(_this2.videoNode,_this2.state.videoJsOptions,function onPlayerReady(){// console.log('onPlayerReady', this)\n});});}});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.player){this.player.dispose();}}},{key:\"render\",value:function render(){var _this3=this;if(!localStorage.getItem('userTokenTime'))return/*#__PURE__*/React.createElement(Redirect,{to:\"/signIn\"});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Navbar,null),/*#__PURE__*/React.createElement(\"div\",{className:\"row\",style:{width:\"100vw\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-xs-12 col-sm-12 col-md-10 col-lg-8 mx-auto mt-5\"},this.state.loaded?/*#__PURE__*/React.createElement(\"div\",{\"data-vjs-player\":true},/*#__PURE__*/React.createElement(\"video\",{ref:function ref(node){return _this3.videoNode=node;},className:\"video-js vjs-big-play-centered\"})):' Loading ... ')));}}]);return VideoPlayer;}(React.Component);export default VideoPlayer;","map":{"version":3,"sources":["C:/Users/mdjub/Documents/Video Player App/frontend/src/components/VideoPlayer/VideoPlayer.js"],"names":["React","axios","Redirect","videojs","Navbar","VideoPlayer","props","state","loaded","videoJsOptions","get","headers","JSON","parse","localStorage","getItem","token","then","res","data","map","video","upload_title","match","params","videoTitle","setState","autoplay","controls","sources","src","video_path","player","videoNode","onPlayerReady","dispose","width","node","Component"],"mappings":"4rBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,UAApB,CACA,MAAO,eAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,C,GAEMC,CAAAA,W,sHACJ,qBAAYC,KAAZ,CAAmB,6CACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,MAAM,CAAE,KADG,CAEXC,cAAc,CAAE,IAFL,CAAb,CAFiB,aAMlB,C,qFAEmB,iBAClBR,KAAK,CAACS,GAAN,CAAU,qCAAV,CAAiD,CAC/CC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,gBAAiB,UAAYC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,EAAkDC,KAFxE,CADsC,CAAjD,EAKGC,IALH,CAKQ,SAAAC,GAAG,CAAI,CACbA,GAAG,CAACC,IAAJ,CAASC,GAAT,CAAa,SAAAC,KAAK,CAAI,CACpB,GAAIA,KAAK,CAACC,YAAN,GAAuB,MAAI,CAAChB,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,CAAwBC,UAAnD,CAA+D,CAC7D,MAAI,CAACC,QAAL,CAAc,CACZlB,MAAM,CAAE,IADI,CAEZC,cAAc,CAAE,CACdkB,QAAQ,CAAE,KADI,CAEdC,QAAQ,CAAE,IAFI,CAGdC,OAAO,CAAE,CAAC,CACRC,GAAG,CAAET,KAAK,CAACU,UADH,CAAD,CAHK,CAFJ,CAAd,CASG,UAAM,CACP,MAAI,CAACC,MAAL,CAAc7B,OAAO,CAAC,MAAI,CAAC8B,SAAN,CAAiB,MAAI,CAAC1B,KAAL,CAAWE,cAA5B,CAA4C,QAASyB,CAAAA,aAAT,EAAyB,CACxF;AACD,CAFoB,CAArB,CAGD,CAbD,EAcD,CACF,CAjBD,EAkBD,CAxBD,EAyBD,C,mEAEsB,CACrB,GAAI,KAAKF,MAAT,CAAiB,CACf,KAAKA,MAAL,CAAYG,OAAZ,GACD,CACF,C,uCAEQ,iBACP,GAAI,CAACrB,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAL,CAA4C,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,SAAb,EAAP,CAC5C,mBACE,oBAAC,KAAD,CAAO,QAAP,mBACE,oBAAC,MAAD,MADF,cAEE,2BAAK,SAAS,CAAC,KAAf,CAAqB,KAAK,CAAE,CAAEqB,KAAK,CAAE,OAAT,CAA5B,eACE,2BAAK,SAAS,CAAC,qDAAf,EACG,KAAK7B,KAAL,CAAWC,MAAX,cACC,2BAAK,sBAAL,eACE,6BAAO,GAAG,CAAE,aAAA6B,IAAI,QAAI,CAAA,MAAI,CAACJ,SAAL,CAAiBI,IAArB,EAAhB,CAA2C,SAAS,CAAC,gCAArD,EADF,CADD,CAIG,eALN,CADF,CAFF,CADF,CAcD,C,yBA3DuBrC,KAAK,CAACsC,S,EA8DhC,cAAejC,CAAAA,WAAf","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\n\nimport videojs from 'video.js';\nimport './videojs.css';\nimport Navbar from '../Navbar/Navbar';\n\nclass VideoPlayer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaded: false,\n      videoJsOptions: null\n    }\n  }\n\n  componentDidMount() {\n    axios.get('http://127.0.0.1:3333/api/videoList', {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('userTokenTime')).token\n      }\n    }).then(res => {\n      res.data.map(video => {\n        if (video.upload_title === this.props.match.params.videoTitle) {\n          this.setState({\n            loaded: true,\n            videoJsOptions: {\n              autoplay: false,\n              controls: true,\n              sources: [{\n                src: video.video_path\n              }]\n            }\n          }, () => {\n            this.player = videojs(this.videoNode, this.state.videoJsOptions, function onPlayerReady() {\n              // console.log('onPlayerReady', this)\n            });\n          });\n        }\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.player) {\n      this.player.dispose()\n    }\n  }\n\n  render() {\n    if (!localStorage.getItem('userTokenTime')) return <Redirect to=\"/signIn\" />\n    return (\n      <React.Fragment>\n        <Navbar />\n        <div className=\"row\" style={{ width: \"100vw\" }}>\n          <div className=\"col-xs-12 col-sm-12 col-md-10 col-lg-8 mx-auto mt-5\">\n            {this.state.loaded ? (\n              <div data-vjs-player>\n                <video ref={node => this.videoNode = node} className=\"video-js vjs-big-play-centered\" />\n              </div>\n            ) : ' Loading ... '}\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default VideoPlayer;\n"]},"metadata":{},"sourceType":"module"}