{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\mdjub\\\\Documents\\\\Video Player App\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Link,Redirect}from'react-router-dom';import axios from'axios';import'./Dashboard.css';import Navbar from'../Navbar/Navbar';var Dashboard=/*#__PURE__*/function(_React$Component){_inherits(Dashboard,_React$Component);var _super=_createSuper(Dashboard);function Dashboard(props){var _this;_classCallCheck(this,Dashboard);_this=_super.call(this,props);var shouldRedirect=false;if(localStorage.getItem('userTokenTime')){// Check if user holds token which is valid in accordance to time\nvar data=JSON.parse(localStorage.getItem('userTokenTime'));if(new Date().getTime()-data.time>1*60*60*1000){// It's been more than hour since you have visited dashboard\nlocalStorage.removeItem('userTokenTime');shouldRedirect=true;}}else{shouldRedirect=true;}_this.state={redirect:shouldRedirect,videoList:[]};return _this;}_createClass(Dashboard,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(localStorage.getItem('userTokenTime')){axios.get('http://127.0.0.1:3333/api/videoList',{headers:{'Content-Type':'application/json','Authorization':'Bearer '+JSON.parse(localStorage.getItem('userTokenTime')).token}}).then(function(res){_this2.setState({videoList:res.data});});}}},{key:\"render\",value:function render(){if(this.state.redirect)return/*#__PURE__*/React.createElement(Redirect,{to:\"/signIn\"});var videos=this.state.videoList.map(function(video){return/*#__PURE__*/React.createElement(\"div\",{className:\"video col-xs-12 col-sm-12 col-md-3 col-lg-4\",key:video._id},/*#__PURE__*/React.createElement(Link,{to:'/video/'+video.upload_title},/*#__PURE__*/React.createElement(\"div\",{className:\"video-thumbnail\"},/*#__PURE__*/React.createElement(\"img\",{src:video.thumbnail_path,alt:\"video thubmnail\"}))),/*#__PURE__*/React.createElement(\"span\",{className:\"username\"},/*#__PURE__*/React.createElement(Link,{to:'/api/videos/'+video.upload_title},video.uploader_name)),/*#__PURE__*/React.createElement(\"span\",{className:\"video-title\"},video.upload_title.replace(/_/g,' ')));});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Navbar,null),/*#__PURE__*/React.createElement(\"div\",{className:\"container mt-5\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Videos\"),/*#__PURE__*/React.createElement(\"hr\",{className:\"my-4\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"streams row\"},videos)));}}]);return Dashboard;}(React.Component);export default Dashboard;","map":{"version":3,"sources":["C:/Users/mdjub/Documents/Video Player App/frontend/src/components/Dashboard/Dashboard.js"],"names":["React","Link","Redirect","axios","Navbar","Dashboard","props","shouldRedirect","localStorage","getItem","data","JSON","parse","Date","getTime","time","removeItem","state","redirect","videoList","get","headers","token","then","res","setState","videos","map","video","_id","upload_title","thumbnail_path","uploader_name","replace","Component"],"mappings":"4rBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,QAAf,KAA+B,kBAA/B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAO,iBAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,C,GAEMC,CAAAA,S,kHACJ,mBAAYC,KAAZ,CAAmB,2CACjB,uBAAMA,KAAN,EAEA,GAAIC,CAAAA,cAAc,CAAG,KAArB,CACA,GAAIC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAJ,CAA2C,CACzC;AACA,GAAMC,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAAb,CACA,GAAI,GAAII,CAAAA,IAAJ,GAAWC,OAAX,GAAuBJ,IAAI,CAACK,IAA5B,CAAoC,EAAI,EAAJ,CAAS,EAAT,CAAc,IAAtD,CAA6D,CAC3D;AACAP,YAAY,CAACQ,UAAb,CAAwB,eAAxB,EACAT,cAAc,CAAG,IAAjB,CACD,CACF,CARD,IAQO,CACLA,cAAc,CAAG,IAAjB,CACD,CAED,MAAKU,KAAL,CAAa,CACXC,QAAQ,CAAEX,cADC,CAEXY,SAAS,CAAE,EAFA,CAAb,CAhBiB,aAoBlB,C,mFAEmB,iBAClB,GAAIX,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAJ,CAA2C,CACzCN,KAAK,CAACiB,GAAN,CAAU,qCAAV,CAAiD,CAC/CC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,gBAAiB,UAAYV,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,EAAkDa,KAFxE,CADsC,CAAjD,EAKGC,IALH,CAKQ,SAAAC,GAAG,CAAI,CACb,MAAI,CAACC,QAAL,CAAc,CACZN,SAAS,CAAEK,GAAG,CAACd,IADH,CAAd,EAGD,CATD,EAUD,CACF,C,uCAEQ,CACP,GAAI,KAAKO,KAAL,CAAWC,QAAf,CAAyB,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,SAAb,EAAP,CAEzB,GAAMQ,CAAAA,MAAM,CAAG,KAAKT,KAAL,CAAWE,SAAX,CAAqBQ,GAArB,CAAyB,SAAAC,KAAK,CAAI,CAC/C,mBACE,2BAAK,SAAS,CAAC,6CAAf,CAA6D,GAAG,CAAEA,KAAK,CAACC,GAAxE,eACE,oBAAC,IAAD,EAAM,EAAE,CAAE,UAAYD,KAAK,CAACE,YAA5B,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,GAAG,CAAEF,KAAK,CAACG,cAAhB,CAAgC,GAAG,CAAC,iBAApC,EADF,CADF,CADF,cAME,4BAAM,SAAS,CAAC,UAAhB,eACE,oBAAC,IAAD,EAAM,EAAE,CAAE,eAAiBH,KAAK,CAACE,YAAjC,EACGF,KAAK,CAACI,aADT,CADF,CANF,cAWE,4BAAM,SAAS,CAAC,aAAhB,EAA+BJ,KAAK,CAACE,YAAN,CAAmBG,OAAnB,CAA2B,IAA3B,CAAiC,GAAjC,CAA/B,CAXF,CADF,CAeD,CAhBc,CAAf,CAkBA,mBACE,oBAAC,KAAD,CAAO,QAAP,mBACE,oBAAC,MAAD,MADF,cAEE,2BAAK,SAAS,CAAC,gBAAf,eACE,uCADF,cAEE,0BAAI,SAAS,CAAC,MAAd,EAFF,cAIE,2BAAK,SAAS,CAAC,aAAf,EACGP,MADH,CAJF,CAFF,CADF,CAaD,C,uBAxEqB1B,KAAK,CAACkC,S,EA2E9B,cAAe7B,CAAAA,SAAf","sourcesContent":["import React from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\n\nimport './Dashboard.css';\nimport Navbar from '../Navbar/Navbar';\n\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n\n    let shouldRedirect = false;\n    if (localStorage.getItem('userTokenTime')) {\n      // Check if user holds token which is valid in accordance to time\n      const data = JSON.parse(localStorage.getItem('userTokenTime'));\n      if (new Date().getTime() - data.time > (1 * 60 * 60 * 1000)) {\n        // It's been more than hour since you have visited dashboard\n        localStorage.removeItem('userTokenTime');\n        shouldRedirect = true;\n      }\n    } else {\n      shouldRedirect = true;\n    }\n\n    this.state = {\n      redirect: shouldRedirect,\n      videoList: []\n    }\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('userTokenTime')) {\n      axios.get('http://127.0.0.1:3333/api/videoList', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('userTokenTime')).token\n        }\n      }).then(res => {\n        this.setState({\n          videoList: res.data\n        });\n      });\n    }\n  }\n\n  render() {\n    if (this.state.redirect) return <Redirect to=\"/signIn\" />\n\n    const videos = this.state.videoList.map(video => {\n      return (\n        <div className=\"video col-xs-12 col-sm-12 col-md-3 col-lg-4\" key={video._id}>\n          <Link to={'/video/' + video.upload_title}>\n            <div className=\"video-thumbnail\">\n              <img src={video.thumbnail_path} alt=\"video thubmnail\" />\n            </div>\n          </Link>\n          <span className=\"username\">\n            <Link to={'/api/videos/' + video.upload_title}>\n              {video.uploader_name}\n            </Link>\n          </span>\n          <span className=\"video-title\">{video.upload_title.replace(/_/g, ' ')}</span>\n        </div>\n      );\n    });\n\n    return (\n      <React.Fragment>\n        <Navbar />\n        <div className=\"container mt-5\">\n          <h4>Videos</h4>\n          <hr className=\"my-4\" />\n\n          <div className=\"streams row\">\n            {videos}\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}